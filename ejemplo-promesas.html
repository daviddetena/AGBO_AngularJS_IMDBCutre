<!DOCTYPE html>
<html lang="en" ng-app="test">
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script src="vendor/angular.min.js"></script>
    </head>
    <body ng-controller="MiControlador">

        <script>

            // Creo mi promesa personalizada. Incluyo $q para valores diferidos
            angular.module("test",[]);
            angular.module("test").service("MiServicio",function($q,$timeout){


                // Promesa personalizada
                this.damePromesa = function(){

                    var diferido = $q.defer();

                    $timeout(function(){
                        diferido.resolve("Todo ha ido bien");
                        //diferido.reject("Algo ha ido mal");
                    },3000);

                    // Siempre se retorna la promesa del objeto diferido cuando se trabaja con objetos diferidos
                    // En este caso, hacemos que el controlador reciba los datos 3s más tarde, según el timeout
                    return diferido.promise;
                };
            });

            angular.module("test").controller("MiControlador",function($scope,MiServicio){
                MiServicio
                    .damePromesa()
                    .then(
                        function(datos){
                            alert(datos);
                        },
                        function(datos){
                            alert(datos);
                        }
                );
            });

        </script>
    </body>
</html>